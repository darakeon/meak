@using Structure.Helpers

@model Structure.Entities.System.Episode

@if (!Config.IsAuthor && Model.HasSummary())
{
	var storyPages = Model.BlockList.Sum(b => b.PageCount) + 1;
	var page = storyPages + 1;
	var lastPageWasOdd = page % 2 == 0;

	if (lastPageWasOdd)
	{
		<div class="just-print empty page-even-item">
			@await Html.PartialAsync("Partial/PrintFrame", new PageFrame(Model, page))

			Esta página está vazia para ajuste de diagramação
		</div>

		page++;
	}

	<div class="just-print summary page-odd-item">
		@await Html.PartialAsync("Partial/PrintFrame", new PageFrame(Model, page))

		<p class="title">
			Resumo do Capítulo
		</p>

		@Model.Summary
	</div>

	if (!lastPageWasOdd)
	{
		<div class="just-print empty page-even-item">
			@await Html.PartialAsync("Partial/PrintFrame", new PageFrame(Model, page))

			Esta página está vazia para ajuste de diagramação
		</div>

		page++;
	}
}
