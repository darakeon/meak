@model Presentation.Models.SeasonEpisodeModel

@{
    ViewBag.Title = String.Format("MEAK {0}{1} – {2}", Model.Story.Episode.Season, Model.Story.Episode, Model.Story.Episode.Title);
    Layout = "~/Views/Shared/_Layout.cshtml";
    Int32 talkCounter = 0;
    Int32 tellerCounter = 0;
}


<p class="title">
    @Model.Story.Episode.Title
</p>

@foreach (var paragraph in Model.Story.ParagraphTypeList)
{
    <div class="paragraph @paragraph.ToString().ToLower()">
        @if (@paragraph == Structure.Enums.ParagraphType.Talk)
        {
            @("– ")
            
            foreach (var piece in Model.Story.TalkList[talkCounter].Pieces)
            {
                if (piece.Style == Structure.Enums.TalkStyle.Teller) { @(" – ") }
                
                <span class="talk_@(piece.Style)">@piece.Text</span>

                if (piece.Style == Structure.Enums.TalkStyle.Teller) { @(" – ") }
            }
            
            @(" (" + Model.Story.TalkList[talkCounter].Character + ")")
        
            talkCounter++;
        }
        else if (@paragraph == Structure.Enums.ParagraphType.Teller)
        {
            foreach (var piece in Model.Story.TellerList[tellerCounter].Pieces)
            {
                <div class="teller_@(piece.Style)">@piece.Text</div>
            }

            tellerCounter++;
        }
    </div>
}

<p class="sign">
    <img alt="Handhara Akeon" src="@Url.Content(@"~/Assets/images/sign.gif")" />
</p>